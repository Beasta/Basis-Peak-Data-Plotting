
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery-CSV - Basic Usage Demo</title>

  <!-- <script src="jquery-1.11.2.js"></script>
  <link href="jquery-ui.css" rel="stylesheet" />
  <script src="jquery-ui.js"></script>
  <script src="jquery.csv-0.71.js"></script> -->

  <script src="https://code.jquery.com/jquery-1.11.2.js"></script>
  <link href="https://code.jquery.com/ui/1.9.0/themes/cupertino/jquery-ui.css" rel="stylesheet" />
  <script src="https://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
  <script src="https://jquery-csv.googlecode.com/files/jquery.csv-0.71.js"></script>
  <script src="fileReader_forBasis.js"></script>
  <script src="htmlTablefromArray.js"></script>
  <script src="dateFixer.js"></script>
  <script src="averagerFunction.js"></script>
  <script>
    var arrayBeast=[]; //array for all data
    var globalBeast="date,calories,gsr,heart-rate,skin-temp,steps\
      2014-11-25 05:40Z,0.1,,,,0\
      2014-11-25 05:41Z,1.1,,,,0\
      2014-11-25 05:42Z,1.2,,,,0\
      2014-11-25 05:43Z,1.1,,,,0\
      2014-11-25 05:44Z,1.1,,,,0\
      2014-11-25 05:45Z,1,,,,0\
      2014-11-25 05:46Z,1.4,,64,,0\
      2014-11-25 05:47Z,1.3,4.56605e-05,64,77.9,6\
      2014-11-25 05:48Z,1.4,4.56605e-05,63,78.8,0\
      2014-11-25 05:49Z,1.1,4.49086e-05,65,78.8,0\
      2014-11-25 05:50Z,1.2,4.54085e-05,66,79.7,0\
      2014-11-25 05:51Z,1.3,4.49086e-05,64,79.7,0\
      2014-11-25 05:52Z,1.1,4.49086e-05,64,79.7,0\
      2014-11-25 05:53Z,1.2,4.49086e-05,64,79.7,0"; //string for raw csv input, using this data so i don't have to load every time
    //$('#input2').val(globalBeast); // add starting data to the input box 
    

    $(function() {
      $("#tabs").tabs();
    });

    $(document).ready(function() {
      
      example2();
      
      
      
      $('#run2').bind('click', function() {
        example2();
        averager(arrayBeast,8,3); //6 is year, 7 is month, 8 is day, 9 is hour, 10 is minute, 3 is heartRate,
      });
      
    });


    function example2() {
      
      var input = globalBeast;//$('#input2').val(); //global beast is string
      
      
      arrayBeast = $.csv.toArrays(input); // change global beast string into an array
      
      var header = arrayBeast.shift(); //remove header row
      arrayBeast=dateFixer(arrayBeast);//breaks date up into year,month,day, and adds them as columns in array
      
      var html = generateTable(arrayBeast);

      $('#result2').empty(); //empty previous data from table
      $('#result2').html(html); //fill table with html data created by generateTable
      
    }

  </script>


  <style>
    textarea {
      width:100%;
    }
    .result {
        width:100%;
        overflow:auto;
    } 
    td {
      padding:5px;
    }
  </style>


</head>

<body>

<article>
        <label for="files">Select a file: </label>
        <input id="files" type="file" />
        <output id="result" />
</article>

<div id=tabs>

  <div id=tabs-3>
    
    <hr />
    <h4>Input Data:</h4>
    <textarea id=input2 style="height:150px;"></textarea>

    <input id=run2 type=button value="Run" />
    <hr />
    <h4>Result:</h4>
    <div class=result>
      <table id=result2 border=1></table>
    </div>
  </div>
</body>
</html>
